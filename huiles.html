<html>
   <head>
        <title>Nos Huiles Essentielles</title>
        <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <link rel="icon" href="img/icon.jpg" type="image/x-icon" />
        <script src="https://requirejs.org/docs/release/2.3.5/minified/require.js"></script>
        <script> 
        $(function(){
               $("#header").load("./include/Header.html"); 
               $.get('./include/Header.html', function() {
                    $('.huiles').css('fontWeight','bold');
               });
               $("#footer").load("./include/Footer.html");
        });
        </script> 
        <style>
            .product {
                margin-bottom: 30px;
            }
            .product-inner {
                box-shadow: 0 0 5px rgba(0,0,0,.2);
                padding: 10px;
            }

        </style>
   </head>
   
   <body>
        <div id="header"></div>
        <div class="container text-center py-4 pt-5 ban " style="color: #9e121b;">
            <h1 class="titre">Huiles Essentielles</h1>
        </div> <hr>

        <div class="container">
            <div class="row  my-3" id="filter">
                <form>
                    <div class="d-flex form-group col-sm-3 col-xs-6"><label class="pt-1">Filter</label>
                        <select data-filter="categorie" class="filter-categorie filter form-control form-select ms-3">
                            <option value="">Select categorie</option>
                            <option value="">Show All</option>
                        </select>
                    </div>
                </form>
            </div>
        </div><hr>
        <div class="container ban mt-2 " >
            <div class="cards row row-cols-2 d-flex justify-content-center " id="products"> </div>

            <nav aria-label="Page navigation example">
                <ul class="pagination justify-content-center mt-4">
                  <li class="page-item">
                    <a class="page-link mt-1"  href="#" aria-label="Previous">
                      <!-- <span aria-hidden="true">&laquo;</span> -->
                      <img src="https://img.icons8.com/small/16/000000/back.png"/>
                    </a>
                  </li>
                  <li class="page-item px-2"><a class="page-link fs-5" href="#">1</a></li>
                  <li class="page-item px-2"><a class="page-link fs-5" href="#">2</a></li>
                  <li class="page-item px-2"><a class="page-link fs-5" href="#">3</a></li>
                  <li class="page-item">
                    <a class="page-link mt-1" href="#" aria-label="Next">
                      <!-- <span aria-hidden="true">&raquo;</span> -->
                      <img src="https://img.icons8.com/small/16/000000/forward.png"/>
                    </a>
                  </li>
                </ul>
            </nav>

            <!-- other categories -->
            <div class="container mt-5 mb-3">
                <h2 class="mon mb-4 ">Autres catégories vous pourriez aimer</h2>
                <div class="row d-flex row-cols-2">
                  <div class="grid col-md-3" onclick="location.href='nos-huiles2.html';" style="cursor: pointer;">
                    <figure class="effect-sadie">
                        <img src="img/minifich9.jpg" class="img-fluid" alt="img02"/>
                        <div class="mask" style="background-color: rgba(0, 0, 0, 0.2)"></div>
                        <figcaption>
                            <p><a class="text-decoration-none text-light fw-bold fs-4" href="nos-huiles2.html">cosmétiques</a></p>
                        </figcaption>			
                    </figure>
                  </div>
                  <div class="grid col-md-3" onclick="location.href='nos-huiles2.html';" style="cursor: pointer;">
                    <figure class="effect-sadie">
                        <img src="img/minifich3.jpg" class="img-fluid" alt="img02"/>
                        <div class="mask" style="background-color: rgba(0, 0, 0, 0.2)"></div>
                        <figcaption>
                            <p><a class="text-decoration-none text-light fw-bold fs-4" href="nos-huiles2.html">Nos Selection</a></p>
                        </figcaption>			
                    </figure>
                  </div>
                  <div class="grid col-md-3" onclick="location.href='nos-huiles2.html';" style="cursor: pointer;">
                    <figure class="effect-sadie">
                        <img src="img/minifich10.jpg" class="img-fluid" alt="img02"/>
                        <div class="mask" style="background-color: rgba(0, 0, 0, 0.2)"></div>
                        <figcaption>
                            <p><a class="text-decoration-none text-light fw-bold fs-4" href="nos-huiles2.html">nouveauté</a></p>
                        </figcaption>			
                    </figure>
                  </div>
                  <div class="grid col-md-3" onclick="location.href='nos-huiles2.html';" style="cursor: pointer;">
                    <figure class="effect-sadie">
                        <img src="img/minifich7.jpg" class="img-fluid" alt="img02"/>
                        <div class="mask" style="background-color: rgba(0, 0, 0, 0.2)"></div>
                        <figcaption>
                            <p><a class="text-decoration-none text-light fw-bold fs-4" href="nos-huiles2.html">Promo du Mois</a></p>
                        </figcaption>			
                    </figure>
                  </div>
            </div>
        </div>
        
        <div id="footer"></div>

    <script>

    var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            var data = JSON.parse(this.responseText);
            // console.log(data);
            var products = "",
	            categories = "",
	            names = "",
	            rates = "";
            for (var i = 0; i < data.length; i++) {
                var categorie = data[i].categorie,
                    name = data[i].name,
                    rate = data[i].rate,
                    price = data[i].price,
                    rawPrice = price.replace("$",""),
                    rawPrice = parseInt(rawPrice.replace(",","")),
                    image = data[i].image;
                    ajouter  =  "<a href='#' class='btn btn-style fw-bold mon mb-3'>Ajouter au panier</a>";
                //create product cards
                products += "<div class=' col-xs-6 col-md-3 product ' data-categorie='" + categorie + "' data-name='" + name +  "' data-price='" + rawPrice + "'><div class='product-inner text-center'><img class='card-img-top' src='" + image + "'> " +  "<br />" + name + "<br />" + price + "<br />" + rate +  ajouter+  "</div></div>";
                //create dropdown of categories
                if (categories.indexOf("<option value='" + categorie + "'>" + categorie + "</option>") == -1) {
                    categories += "<option value='" + categorie + "'>" + categorie + "</option>";
                }
            }
            $("#products").html(products);
            $(".filter-categorie").append(categories);

        }
    };
    xmlhttp.open("GET", "./include/huiles.json", true);
    xmlhttp.send();
    


    var filtersObject = {};
    
    //on filter change
    $(".filter").on("change",function() {
        var filterName = $(this).data("filter"),
            filterVal = $(this).val();
        
        if (filterVal == "") {
            delete filtersObject[filterName];
        } else {
            filtersObject[filterName] = filterVal;
        }
        
        var filters = "";
        
        for (var key in filtersObject) {
              if (filtersObject.hasOwnProperty(key)) {
                filters += "[data-"+key+"='"+filtersObject[key]+"']";
             }
        }
        
        if (filters == "") {
            $(".product").show();
        } else {
            if((filters == "Prix croissant")){

            }else{
                $(".product").hide();
                $(".product").hide().filter(filters).show();
            }

        }
    });
    
    </script>

   </body>

</html>
